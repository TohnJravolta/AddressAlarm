# AddressAlarm Local Change Log (v0.2.42)

_Last updated: 2025-10-08 (local build review)_

This document summarizes all code and configuration updates applied locally since the upstream GitHub build. Each section groups related changes with file references so you can audit and merge with confidence.

---

## 1. Settings and App Enumeration

- **Manifest visibility** - Added a `<queries>` block to expose launcher intents and explicitly list Google Maps so the package manager can see all user-facing apps on Android 11+.  
  - `app/src/main/AndroidManifest.xml`
- **Settings screen list population** - Replaced `getInstalledApplications` with a launcher intent query, deduped packages, and sorted labels. Gig apps keep their annotation.  
  - `app/src/main/java/org/addressalarm/ui/SettingsFragment.kt`

## 2. Main Screen UX Improvements

- **Delete safety** - Single-entry deletes now prompt for confirmation; multi-select delete triggers a confirmation dialog showing the count.  
  - `app/src/main/java/org/addressalarm/ui/DbMainScreen.kt`
- **Search feedback** - Cleaned up the empty-state copy for search results.  
  - `app/src/main/java/org/addressalarm/ui/DbMainScreen.kt`
- **Support and site links** - Added a "Support the developer" dropdown item with a Ko-fi dialog and kept the `addressalarm.com` shortcut accessible.  
  - `app/src/main/java/org/addressalarm/ui/DbMainScreen.kt`

## 3. Places Manager Safeguards

- **Legacy list delete confirmation** - Mirrored the confirmation dialog pattern in the legacy places manager view.  
  - `app/src/main/java/org/addressalarm/ui/PlacesManagerScreen.kt`

## 4. License Compliance Flow

- **Bundled LICENSE asset** - Gradle task copies the repository LICENSE into the APK at build time.  
  - `app/build.gradle.kts`
- **First-run dialog** - Main activity now blocks usage until the user reviews the license, reads a plain-language summary, and accepts. Acceptance is stored in `SharedPreferences`; exit closes the app.  
  - `app/src/main/java/org/addressalarm/ui/MainActivity.kt`

## 5. Dialog Copy Refinements

- **Gig app warning** - Fixed encoding artifacts and clarified the message in the searchable multi-select dialog.  
  - `app/src/main/java/org/addressalarm/ui/SearchableMultiSelectListPreferenceDialogFragmentCompat.kt`

## 6. Documentation Updates

- **README refresh** - Documented the v0.2.42 highlights (per-app monitoring, encrypted storage, delete confirmations, Ko-fi support, license acceptance) and linked to the new build.  
  - `README.md`
- **Project changelog** - Logged the README updates under the Unreleased section.  
  - `CHANGELOG.md`
- **Roadmap status update** - Marked the encrypted database storage item as completed with v0.2.42 context.  
  - `ROADMAP.md`

---

### Testing and Notes
- Build not executed locally (missing `JAVA_HOME` in the environment). Please run `./gradlew assembleDebug` after setting a JDK.
- SQLCipher database encryption continues to rely on device-keystore-protected keys; no changes were required.

For questions on specific sections, reference the file paths above or reach out with commit diffs.
